<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Introduction to R and RStudio | UVA Health Sciences Library Workshops</title>
  <meta name="description" content="This site hosts workshop tutorial materials for researchers in the life sciences at the University of Virginia to learn R skills." />
  <meta name="generator" content="bookdown 0.10 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Introduction to R and RStudio | UVA Health Sciences Library Workshops" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://hsl-workshops.netlify.com/" />
  <meta property="og:image" content="https://hsl-workshops.netlify.com/images/UVA_HSL.png" />
  <meta property="og:description" content="This site hosts workshop tutorial materials for researchers in the life sciences at the University of Virginia to learn R skills." />
  <meta name="github-repo" content="HSL-Data/HSL_Workshops" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Introduction to R and RStudio | UVA Health Sciences Library Workshops" />
  
  <meta name="twitter:description" content="This site hosts workshop tutorial materials for researchers in the life sciences at the University of Virginia to learn R skills." />
  <meta name="twitter:image" content="https://hsl-workshops.netlify.com/images/UVA_HSL.png" />

<meta name="author" content="Data Services @ HSL" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/UVA_HSL.png" />
  <link rel="shortcut icon" href="images/UVA_HSL.png" type="image/x-icon" />
<link rel="prev" href="index.html">
<link rel="next" href="taming-wild-data.html">
<script src="assets/jquery-2.2.3/jquery.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#getting-started"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-instructors"><i class="fa fa-check"></i>About the Instructors</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#david-n-martin-ms"><i class="fa fa-check"></i>David N Martin, MS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#marieke-k-jones-phd"><i class="fa fa-check"></i>Marieke K Jones, PhD</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Core Lessons</b></span></li>
<li class="chapter" data-level="1" data-path="Intro.html"><a href="Intro.html"><i class="fa fa-check"></i><b>1</b> Introduction to R and RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="Intro.html"><a href="Intro.html#panes-in-rstudio"><i class="fa fa-check"></i><b>1.1</b> Panes in RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="Intro.html"><a href="Intro.html#set-up-an-r-project"><i class="fa fa-check"></i><b>1.2</b> Set up an R Project</a></li>
<li class="chapter" data-level="1.3" data-path="Intro.html"><a href="Intro.html#r-as-a-calculator"><i class="fa fa-check"></i><b>1.3</b> R as a calculator</a></li>
<li class="chapter" data-level="1.4" data-path="Intro.html"><a href="Intro.html#comments"><i class="fa fa-check"></i><b>1.4</b> Comments</a></li>
<li class="chapter" data-level="1.5" data-path="Intro.html"><a href="Intro.html#creating-r-objects"><i class="fa fa-check"></i><b>1.5</b> Creating R objects</a></li>
<li class="chapter" data-level="1.6" data-path="Intro.html"><a href="Intro.html#exercise-1.1"><i class="fa fa-check"></i><b>1.6</b> EXERCISE 1.1</a></li>
<li class="chapter" data-level="1.7" data-path="Intro.html"><a href="Intro.html#built-in-functions"><i class="fa fa-check"></i><b>1.7</b> Built-in Functions</a></li>
<li class="chapter" data-level="1.8" data-path="Intro.html"><a href="Intro.html#nesting-functions"><i class="fa fa-check"></i><b>1.8</b> Nesting Functions</a></li>
<li class="chapter" data-level="1.9" data-path="Intro.html"><a href="Intro.html#exercise-1.2"><i class="fa fa-check"></i><b>1.9</b> EXERCISE 1.2</a></li>
<li class="chapter" data-level="1.10" data-path="Intro.html"><a href="Intro.html#vectors"><i class="fa fa-check"></i><b>1.10</b> Vectors</a></li>
<li class="chapter" data-level="1.11" data-path="Intro.html"><a href="Intro.html#inspecting-vectors"><i class="fa fa-check"></i><b>1.11</b> Inspecting Vectors</a></li>
<li class="chapter" data-level="1.12" data-path="Intro.html"><a href="Intro.html#indexing-vectors"><i class="fa fa-check"></i><b>1.12</b> Indexing vectors</a></li>
<li class="chapter" data-level="1.13" data-path="Intro.html"><a href="Intro.html#dataframes"><i class="fa fa-check"></i><b>1.13</b> DataFrames</a></li>
<li class="chapter" data-level="1.14" data-path="Intro.html"><a href="Intro.html#the-gapminder-data"><i class="fa fa-check"></i><b>1.14</b> The Gapminder data</a></li>
<li class="chapter" data-level="1.15" data-path="Intro.html"><a href="Intro.html#inspecting-dataframes"><i class="fa fa-check"></i><b>1.15</b> Inspecting Dataframes</a></li>
<li class="chapter" data-level="1.16" data-path="Intro.html"><a href="Intro.html#accessing-variables-subsetting-data-frames"><i class="fa fa-check"></i><b>1.16</b> Accessing variables &amp; subsetting data frames</a></li>
<li class="chapter" data-level="1.17" data-path="Intro.html"><a href="Intro.html#exercise-1.3"><i class="fa fa-check"></i><b>1.17</b> EXERCISE 1.3</a></li>
<li class="chapter" data-level="1.18" data-path="Intro.html"><a href="Intro.html#subsetting-a-dataframe"><i class="fa fa-check"></i><b>1.18</b> Subsetting a dataframe</a></li>
<li class="chapter" data-level="1.19" data-path="Intro.html"><a href="Intro.html#exercise-1.4"><i class="fa fa-check"></i><b>1.19</b> EXERCISE 1.4</a></li>
<li class="chapter" data-level="1.20" data-path="Intro.html"><a href="Intro.html#plots-in-base-r"><i class="fa fa-check"></i><b>1.20</b> Plots in base R</a></li>
<li class="chapter" data-level="1.21" data-path="Intro.html"><a href="Intro.html#exercise-1.5"><i class="fa fa-check"></i><b>1.21</b> EXERCISE 1.5</a></li>
<li class="chapter" data-level="1.22" data-path="Intro.html"><a href="Intro.html#write-csv-file"><i class="fa fa-check"></i><b>1.22</b> Write csv file</a></li>
<li class="chapter" data-level="1.23" data-path="Intro.html"><a href="Intro.html#saving-your-work-and-quitting-r"><i class="fa fa-check"></i><b>1.23</b> Saving your work and quitting R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="taming-wild-data.html"><a href="taming-wild-data.html"><i class="fa fa-check"></i><b>2</b> Taming Wild Data</a><ul>
<li class="chapter" data-level="2.0.1" data-path="taming-wild-data.html"><a href="taming-wild-data.html#our-data"><i class="fa fa-check"></i><b>2.0.1</b> Our data</a></li>
<li class="chapter" data-level="2.0.2" data-path="taming-wild-data.html"><a href="taming-wild-data.html#set-up-project-download-data"><i class="fa fa-check"></i><b>2.0.2</b> Set up project &amp; Download data</a></li>
<li class="chapter" data-level="2.1" data-path="taming-wild-data.html"><a href="taming-wild-data.html#tibble"><i class="fa fa-check"></i><b>2.1</b> Tibbles v. dataframe</a></li>
<li class="chapter" data-level="2.2" data-path="taming-wild-data.html"><a href="taming-wild-data.html#pipe"><i class="fa fa-check"></i><b>2.2</b> The pipe: <strong>%&gt;%</strong></a></li>
<li class="chapter" data-level="2.3" data-path="taming-wild-data.html"><a href="taming-wild-data.html#the-dplyr-package"><i class="fa fa-check"></i><b>2.3</b> The dplyr package</a><ul>
<li class="chapter" data-level="2.3.1" data-path="taming-wild-data.html"><a href="taming-wild-data.html#filter"><i class="fa fa-check"></i><b>2.3.1</b> filter()</a></li>
<li class="chapter" data-level="2.3.2" data-path="taming-wild-data.html"><a href="taming-wild-data.html#select"><i class="fa fa-check"></i><b>2.3.2</b> select()</a></li>
<li class="chapter" data-level="2.3.3" data-path="taming-wild-data.html"><a href="taming-wild-data.html#dplyr-in-action"><i class="fa fa-check"></i><b>2.3.3</b> dplyr in action</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="taming-wild-data.html"><a href="taming-wild-data.html#exercise-1"><i class="fa fa-check"></i><b>2.4</b> EXERCISE 1</a></li>
<li class="chapter" data-level="2.5" data-path="taming-wild-data.html"><a href="taming-wild-data.html#separate"><i class="fa fa-check"></i><b>2.5</b> Separate</a></li>
<li class="chapter" data-level="2.6" data-path="taming-wild-data.html"><a href="taming-wild-data.html#resources-for-regular-expressions"><i class="fa fa-check"></i><b>2.6</b> Resources for Regular Expressions</a></li>
<li class="chapter" data-level="2.7" data-path="taming-wild-data.html"><a href="taming-wild-data.html#exercise-2"><i class="fa fa-check"></i><b>2.7</b> EXERCISE 2</a><ul>
<li class="chapter" data-level="2.7.1" data-path="taming-wild-data.html"><a href="taming-wild-data.html#merge-gene-ontologies"><i class="fa fa-check"></i><b>2.7.1</b> Merge Gene Ontologies</a></li>
<li class="chapter" data-level="2.7.2" data-path="taming-wild-data.html"><a href="taming-wild-data.html#fix-nutrient-names"><i class="fa fa-check"></i><b>2.7.2</b> Fix Nutrient names</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="taming-wild-data.html"><a href="taming-wild-data.html#break"><i class="fa fa-check"></i><b>2.8</b> Break</a></li>
<li class="chapter" data-level="2.9" data-path="taming-wild-data.html"><a href="taming-wild-data.html#more-fun-with-dplyr"><i class="fa fa-check"></i><b>2.9</b> More fun with dplyr</a></li>
<li class="chapter" data-level="2.10" data-path="taming-wild-data.html"><a href="taming-wild-data.html#exercise-3"><i class="fa fa-check"></i><b>2.10</b> EXERCISE 3</a><ul>
<li class="chapter" data-level="2.10.1" data-path="taming-wild-data.html"><a href="taming-wild-data.html#arrange"><i class="fa fa-check"></i><b>2.10.1</b> arrange()</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="taming-wild-data.html"><a href="taming-wild-data.html#exercise-4"><i class="fa fa-check"></i><b>2.11</b> EXERCISE 4</a><ul>
<li class="chapter" data-level="2.11.1" data-path="taming-wild-data.html"><a href="taming-wild-data.html#summarize"><i class="fa fa-check"></i><b>2.11.1</b> summarize()</a></li>
<li class="chapter" data-level="2.11.2" data-path="taming-wild-data.html"><a href="taming-wild-data.html#group_by"><i class="fa fa-check"></i><b>2.11.2</b> group_by()</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="taming-wild-data.html"><a href="taming-wild-data.html#exercise-5"><i class="fa fa-check"></i><b>2.12</b> EXERCISE 5</a></li>
<li class="chapter" data-level="2.13" data-path="taming-wild-data.html"><a href="taming-wild-data.html#exercise-6"><i class="fa fa-check"></i><b>2.13</b> EXERCISE 6</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>3</b> Data Visualization with ggplot2</a><ul>
<li class="chapter" data-level="3.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#resources-to-learn-ggplot2"><i class="fa fa-check"></i><b>3.1</b> Resources to learn ggplot2</a></li>
<li class="chapter" data-level="3.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#make-sure-everyone-has-tidyverse-or-readr-dplyr-ggplot2"><i class="fa fa-check"></i><b>3.2</b> Make sure everyone has tidyverse or readr, dplyr, ggplot2</a></li>
<li class="chapter" data-level="3.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#download-data-and-make-a-new-project"><i class="fa fa-check"></i><b>3.3</b> Download data and make a new project</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#gapminder-data"><i class="fa fa-check"></i><b>3.3.1</b> Gapminder data</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#dplyr-review"><i class="fa fa-check"></i><b>3.3.2</b> dplyr review</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#ggplot"><i class="fa fa-check"></i><b>3.4</b> About ggplot2</a></li>
<li class="chapter" data-level="3.5" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#plotting-bivariate-data-continuous-y-by-continuous-x"><i class="fa fa-check"></i><b>3.5</b> Plotting bivariate data: continuous Y by continuous X</a><ul>
<li class="chapter" data-level="3.5.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#adding-layers"><i class="fa fa-check"></i><b>3.5.1</b> Adding layers</a></li>
<li class="chapter" data-level="3.5.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#faceting"><i class="fa fa-check"></i><b>3.5.2</b> Faceting</a></li>
<li class="chapter" data-level="3.5.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#saving-plots"><i class="fa fa-check"></i><b>3.5.3</b> Saving plots</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#plotting-bivariate-data-continuous-y-by-categorical-x"><i class="fa fa-check"></i><b>3.6</b> Plotting bivariate data: continuous Y by categorical X</a></li>
<li class="chapter" data-level="3.7" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#plotting-univariate-continuous-data"><i class="fa fa-check"></i><b>3.7</b> Plotting univariate continuous data</a></li>
<li class="chapter" data-level="3.8" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#publication-ready-plots-themes"><i class="fa fa-check"></i><b>3.8</b> Publication-ready plots &amp; themes</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">UVA Health Sciences Library Workshops</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Intro" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Introduction to R and RStudio</h1>
<p>R is the underlying statistical computing environment. You can think of this like the engine of a car. That makes RStudio like the dashboard.</p>
<p><img src="images/engine.jpg" alt="R is the engine" width="250" /> <img src="images/dashboard.jpg" alt="RStudio is the dashboard" width="250" /></p>
<p>RStudio is an integrated development environment (IDE) that allows us to interact with R. RStudio sits on top of R and makes writing and executing R code a lot easier. We’ll be benefiting from many of the added features that come with RStudio and we will point them out as we go.</p>
<div id="panes-in-rstudio" class="section level2">
<h2><span class="header-section-number">1.1</span> Panes in RStudio</h2>
<p>When you open RStudio, you will have access to R (there is no need to open R directly).</p>
<p>Now go to the top menu to open a new R Script File –&gt; New File –&gt; R Script</p>
<p>Great! Now you will see four panes</p>
<ul>
<li>I have mine set up as follows:
<ul>
<li>Editor / script / source in the top left</li>
<li>Console bottom left</li>
<li>Environment/history on the top right</li>
<li>Plots/help on the bottom right</li>
</ul></li>
</ul>
<div class="figure">
<img src="images/RStudioPanes.png" alt="Four pane layout in RStudio" width="600" />
<p class="caption">Four pane layout in RStudio</p>
</div>
<ul>
<li><p>On the top left is the script or editor window. This is where we are going to write all of our code.</p></li>
<li><p>On the lower left we have the console window. This is where R is running, and this is what you would see if you opened R instead of RStudio. In this pane we can see the code we send and then the answer.</p></li>
<li><p>The top right has the environment and history tabs. The Environment is a list of all objects that are saved in memory. The History tab shows all commands that have been run.</p></li>
<li>On the bottom right hand side there’s a window with several tabs.
<ul>
<li>Files shows the file structure of the working directory.</li>
<li>Plots is where your visualizations will appear.</li>
<li>Packages shows all of the installed packages where checked ones are loaded and unchecked packages are not loaded.</li>
<li>Help shows information about functions.</li>
<li>Viewer for viewing other kinds of output, like web content.</li>
</ul></li>
</ul>
<p>To change your preferences for the pane layout go to Tools –&gt; Global Options –&gt; Pane Layout. The Global Options menu is also where you can change the font size, background color, and other useful preferences.</p>
<p>There is one preference that we recommend you change right now. That is the <em>soft wrap</em> feature that will wrap long lines of code or comments onto several lines so that you do not need to scroll right to see the whole code or sentence. Go to Tools –&gt; Global Options –&gt; Code and click the box next to <em>Soft Wrap R Source files</em></p>
</div>
<div id="set-up-an-r-project" class="section level2">
<h2><span class="header-section-number">1.2</span> Set up an R Project</h2>
<p>I mentioned previously that RStudio has a lot of pretty handy features. One of those is the project structure</p>
<p>Before we can start writing code we need to set up a project so that the data and our codes will be in the same place. Go to File –&gt; New Project–&gt; New Directory. I will name mine IntroR and it will be a folder on my desktop</p>
<div class="figure">
<img src="images/NewRproj.png" alt="New R Project" width="350" />
<p class="caption">New R Project</p>
</div>
<p>Now we have opened up a new instance of RStudio running inside the IntroR folder. Notice on the top of the console pane and the Files pane (bottom right) that the path to the IntroR folder is specified.</p>
<p>When we start reading in data it will be important that the <em>code and the data are in the same place.</em> Creating a project creates an Rproj file that runs R <em>in that folder</em>. If you are familiar with working directories, this process is setting the working directory for this project as this folder.</p>
<p>Once you have a project set up, when you want to read in dataset <em>whatever.txt</em>, you will be able to easily specify the path pointing to <em>whatever.txt</em> rather than having to specify a full path. This is critical for reproducibility, and we’ll talk about that more later.</p>
<p>To get things arranged for later, please download the dataset we are going to use. Right click –&gt; Save link as to download the file to your computer.</p>
<p><a href="data/gapminder.csv">gapminder data set</a></p>
<p>Move the dataset to your IntroR directory in a subfolder called <strong>data</strong>.</p>
<div class="figure">
<img src="images/filestructure.png" alt="File structure" width="450" />
<p class="caption">File structure</p>
</div>
<p>Now that we have a project directory and the dataset inside that project directory, let’s open up a new script and begin coding! Go to File –&gt; New –&gt; New R Script</p>
<p>Code that you type into the console is code that R executes. From here forward we will use the editor window to write a script that we can save to a file and run it again whenever we want to. We usually give it a <code>.R</code> extension, but it’s just a plain text file so it can be opened by any text editor program.</p>
</div>
<div id="r-as-a-calculator" class="section level2">
<h2><span class="header-section-number">1.3</span> R as a calculator</h2>
<p>R can be used as a calculator. Make sure you’re typing into into the editor, not the console. Use the run button in the top right of the script to run the code.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span><span class="op">+</span><span class="dv">2</span></code></pre>
<pre><code>## [1] 4</code></pre>
<p>Notice the output in the console that tells us the code we wrote and the answer. Let’s try some others.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span><span class="op">*</span><span class="dv">4</span></code></pre>
<pre><code>## [1] 20</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span><span class="op">^</span><span class="dv">3</span></code></pre>
<pre><code>## [1] 8</code></pre>
<p>Instead of using the Run button to run code, let’s try the keyboard shortcut to run code. To send code from the editor to the console, use <code>CMD</code>+<code>Enter</code> (Mac) or <code>Ctrl</code>+<code>Enter</code> (Windows). This is <strong>way</strong> faster than using your mouse to hit the Run button each time.</p>
<p>Go back to your code above and run them using the keyboard. We can also run multiple lines of code at once. Now highlight 2 lines of code and run them together.</p>
<p>R also knows order of operations and scientific notation.</p>
<pre class="sourceCode r"><code class="sourceCode r">(<span class="dv">5</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>)<span class="op">^</span><span class="dv">2</span></code></pre>
<pre><code>## [1] 64</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">^</span><span class="dv">2</span></code></pre>
<pre><code>## [1] 14</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="fl">5e4</span></code></pre>
<pre><code>## [1] 50000</code></pre>
</div>
<div id="comments" class="section level2">
<h2><span class="header-section-number">1.4</span> Comments</h2>
<p>Anything after a <code>#</code> sign is a comment, meaning it will not be executed as code. Use them liberally to <em>comment about what you are doing and why</em>.</p>
<p>Today, you can take notes about what you are learning as comments in your script.</p>
<p>Comments are a big part of making your work reproducible for others and for your future self when you open this script a few months from now and need to remember what you were doing.</p>
<p>Commenting is also helpful when you’re testing things out during your analysis so that you can ‘turn off’ parts of your script.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Here is a comment</span>
<span class="co"># Note that anything after the # is considered a comment</span></code></pre>
<p>Let’s save our script before we get any further.</p>
<p>Go up to File –&gt; Save As and let’s go with “intro.R”</p>
</div>
<div id="creating-r-objects" class="section level2">
<h2><span class="header-section-number">1.5</span> Creating R objects</h2>
<p>Let’s learn to create R objects next. We assign <em>values</em> to <em>objects</em> using the assignment operator “&lt;-”. This arrow is typed with a less than sign followed by a dash. We first name the object on the left and then provide the assignment operator <code>&lt;-</code>, and then the value.</p>
<p>Let’s create an object called weight kg that takes the value 55.</p>
<pre class="sourceCode r"><code class="sourceCode r">weight_kg &lt;-<span class="st"> </span><span class="dv">55</span></code></pre>
<p>Look in the Environment pane (top right) to see your new R object!</p>
<p><code>&lt;-</code> is the assignment operator in R. It assigns values on the right to object names on the left. Think of it like an arrow that points from the value to the object. The <code>&lt;-</code> is mostly similar to <code>=</code> but not always. Learn to use <code>&lt;-</code> as it is good R programming practice. Using <code>=</code> in place of <code>&lt;-</code> can lead to issues down the line. The keyboard shortcut for inserting the <code>&lt;-</code> operator is <code>option + dash</code>(Mac) and <code>Alt + dash</code> (Windows).</p>
<ul>
<li>Objects can be given any name such as <code>x</code>, <code>current_temperature</code>, or <code>subject_id</code>, but they may not have a space in the name. You want your object names to be explicit and not too long. They also cannot start with a number (<code>2x</code> is not valid but <code>x2</code> is). R is case sensitive (e.g., <code>weight_kg</code> is different from <code>Weight_kg</code>).</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r">Weight_kg &lt;-<span class="st"> </span><span class="dv">55</span></code></pre>
<p>Look in the Environment pane to see that there are now 2 different weight objects since we used different casing in the spelling of the object names.</p>
<p>There are some words that should not be used as object names because they represent the names of functions in R. It is best to not use function names as object names since it will be confusing to tell the difference between the object and the function (e.g., <code>c</code>, <code>T</code>, <code>mean</code>, <code>data</code>, <code>df</code>, <code>weights</code>).</p>
<p>If in doubt, start typing the name and if RStudio suggests something it already knows, then that name is already in use.</p>
<p>For example, it is perfectly reasonable to think that data is a great name for your dataset but as you start to type it, the autocomplete function in RStudio tells you that <code>data</code> already exists.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>()</code></pre>
<p>Try to use nouns for object names, and verbs for function names to help yourself remember what each item is.</p>
<p>When assigning a value to an object, R does not print anything. You can ask to print the value by typing the object name:</p>
<pre class="sourceCode r"><code class="sourceCode r">weight_kg</code></pre>
<pre><code>## [1] 55</code></pre>
<p>Now that R has <code>weight_kg</code> in memory, we can do arithmetic with it. For instance, we may want to convert this weight in pounds (weight in pounds is 2.2 times the weight in kg).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="fl">2.2</span> <span class="op">*</span><span class="st"> </span>weight_kg</code></pre>
<pre><code>## [1] 121</code></pre>
<p>We can also change an object’s value by assigning it a new one:</p>
<pre class="sourceCode r"><code class="sourceCode r">weight_kg &lt;-<span class="st"> </span><span class="fl">57.5</span>
<span class="fl">2.2</span> <span class="op">*</span><span class="st"> </span>weight_kg</code></pre>
<pre><code>## [1] 126.5</code></pre>
<p>Let’s store the weight in pounds in a new object called weight_lb. Remember to put the name on the left and then the arrow pointing to the name.</p>
<pre class="sourceCode r"><code class="sourceCode r">weight_lb &lt;-<span class="st"> </span><span class="fl">2.2</span> <span class="op">*</span><span class="st"> </span>weight_kg</code></pre>
<p>Now let’s change <code>weight_kg</code> to 100.</p>
<pre class="sourceCode r"><code class="sourceCode r">weight_kg &lt;-<span class="st"> </span><span class="dv">100</span></code></pre>
<p>What do you think is the current content of the object <code>weight_lb</code>? 126.5 or 220? Why?</p>
<p>Check your answer</p>
<pre class="sourceCode r"><code class="sourceCode r">weight_lb</code></pre>
<hr />
</div>
<div id="exercise-1.1" class="section level2">
<h2><span class="header-section-number">1.6</span> EXERCISE 1.1</h2>
<p>Try these on your own</p>
<p>A. You have a patient with a height (inches) of 73 and a weight (lbs) of 203. Create r objects labeled ‘height’ and ‘weight’.</p>
<p>B. Convert ‘weight’ to ‘weight_kg’ by dividing by 2.2. Convert ‘height’ to ‘height_m’ by dividing by 39.37</p>
<p>C. Calculate a new object ‘bmi’ where BMI = weight_kg / (height_m*height_m)</p>
<pre class="sourceCode r"><code class="sourceCode r">height &lt;-<span class="st"> </span><span class="dv">73</span>
weight &lt;-<span class="st"> </span><span class="dv">203</span>

weight_kg &lt;-<span class="st"> </span>weight <span class="op">/</span><span class="st"> </span><span class="fl">2.2</span>
weight_kg</code></pre>
<pre><code>## [1] 92.27273</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">height_m &lt;-<span class="st"> </span>height <span class="op">/</span><span class="st"> </span><span class="fl">39.37</span>
height_m</code></pre>
<pre><code>## [1] 1.854204</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">bmi &lt;-<span class="st"> </span>weight_kg <span class="op">/</span><span class="st"> </span>(height_m <span class="op">*</span><span class="st"> </span>height_m)
bmi</code></pre>
<pre><code>## [1] 26.83851</code></pre>
<hr />
<p>You can remove objects from the environment using the <code>rm()</code> function. You can do this one at a time or remove several objects at once by separating their names with <code>,</code>. The broom button in the Environment pane will remove all objects from your environment.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(weight_lb, Weight_kg)
<span class="co"># Now ask R for weight_lb (uncomment the following line and run it)</span>
<span class="co"># weight_lb </span>
<span class="co"># oops! you should get an error because weight_lb no longer exists!</span></code></pre>
</div>
<div id="built-in-functions" class="section level2">
<h2><span class="header-section-number">1.7</span> Built-in Functions</h2>
<p>R has many built-in functions. In fact, we already used the <code>rm()</code> function to remove an object from the envrionment. A function is denoted in R by a word followed by (). For example, let’s use a function most of us will be familiar with. The function to calcualte a square root is <code>sqrt()</code>. Let’s take the square root of something we know the answer to, like 144</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(<span class="dv">144</span>)</code></pre>
<pre><code>## [1] 12</code></pre>
<p>Nice! Let’s try taking the log of 1000. I am expecting to see that the answer = 3…</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">1000</span>)</code></pre>
<pre><code>## [1] 6.907755</code></pre>
<p>But 3 is not what is returned! So now I want to know more about this function to figure out what is happening.</p>
<p>To get help on a function, we can type a question mark in front of the function’s name.</p>
<pre class="sourceCode r"><code class="sourceCode r">?log</code></pre>
<p>The help file has appeared in the bottom right pane of RStudio. Reading through this help file, we can see that we were taking the natural log of 1000, when we might have meant to use the <code>log10()</code> function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">1000</span>)</code></pre>
<pre><code>## [1] 6.907755</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log10</span>(<span class="dv">1000</span>)</code></pre>
<pre><code>## [1] 3</code></pre>
<p>A little further down the help menu we can see a section called Arguments. Arguments are inputs to the function that change the way the function operates. Above, 1000 was the argument provided to the <code>log()</code> and <code>log10()</code> functions. In the Arguments section of the help menu, we see that we can also specify a base argument to the regular log function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">1000</span>, <span class="dt">base =</span> <span class="dv">10</span>) <span class="co"># same as log10(1000)</span></code></pre>
<pre><code>## [1] 3</code></pre>
<p>While you do not have to label the arguments, it is good practice to label them so that readers will know exactly what options you have set in the function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">1000</span>, <span class="dv">10</span>)</code></pre>
<pre><code>## [1] 3</code></pre>
<p>This also works just fine, but labels definitely improve readability of your code and for some functions, explicility labelling argument names will be necessary.</p>
<p>Try typing log() again and notice that RStudio offers help in the small yellow pop-up box specifying that the default base of the log function is e, <code>base = exp(1)</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#log()</span></code></pre>
<p>Once you have typed a function name with its (), you can hit the tab key to see the arguments of the function and read about them all without specificially calling up the help menu. Pretty helpful, right?</p>
</div>
<div id="nesting-functions" class="section level2">
<h2><span class="header-section-number">1.8</span> Nesting Functions</h2>
<p>In some cases, you may need to pass the results of one function to another function. This is called nesting functions. For example, let’s take the square root of the log base 10 of 1000.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(<span class="kw">log</span>(<span class="dv">1000</span>, <span class="dt">base =</span> <span class="dv">10</span>))</code></pre>
<pre><code>## [1] 1.732051</code></pre>
<p>Because the <code>log()</code> function outputs a number and because <code>sqrt()</code> takes a number, we can nest the two together. You can probably suspect that as you add more and more functions in a nest, it begins to be very difficult to read.</p>
<p>Readability is important, so one suggestion is to save intermediate objects to un-nest functions.</p>
<pre class="sourceCode r"><code class="sourceCode r">myval &lt;-<span class="st"> </span><span class="kw">log</span>(<span class="dv">1000</span>, <span class="dt">base =</span> <span class="dv">10</span>)
<span class="kw">sqrt</span>(myval)</code></pre>
<pre><code>## [1] 1.732051</code></pre>
<p>In the next chapter, we’ll learn a different method of chaining functions together that is more readable. Jump to section <a href="taming-wild-data.html#pipe">2.2</a></p>
<hr />
</div>
<div id="exercise-1.2" class="section level2">
<h2><span class="header-section-number">1.9</span> EXERCISE 1.2</h2>
<p>See <code>?abs</code> and use that knowledge to calculate the square root of the log-base-10 of the absolute value of <code>-4*(2550-50)</code>. Answer should be <code>2</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(<span class="kw">log</span>(<span class="kw">abs</span>(<span class="op">-</span><span class="dv">4</span><span class="op">*</span>(<span class="dv">2550-50</span>)), <span class="dt">base =</span> <span class="dv">10</span>))</code></pre>
<pre><code>## [1] 2</code></pre>
<hr />
</div>
<div id="vectors" class="section level2">
<h2><span class="header-section-number">1.10</span> Vectors</h2>
<p>We’ve talked quite a bit about R objects but we haven’t yet addressed the fact that there are many different kinds of R objects.</p>
<p>Besides R objects that store a single element, another extremely common kind of object you’ll encounter in R is the vector. A vector is an object that contains several elements.</p>
<p>We are building up to exploring a dataset, or what R calls a dataframe. Dataframes are made of several vectors, so understanding vectors in R will be important to our understanding of Dataframes.</p>
<p>A quick way to create a vector is to use a colon.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></code></pre>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p>This returns the numbers 1 through 5.</p>
<p>We can also do arithmetic with vectors. Let’s add together 2 vectors of the same lengths.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">:</span><span class="dv">5</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span><span class="op">:</span><span class="dv">10</span></code></pre>
<pre><code>## [1]  7  9 11 13 15</code></pre>
<p>Notice that each element of the first vector is added to its pair in the second vector. So 1 is added to 6, 2 is added to 7, and so on until we have the resulting vector that represents the results of all 5 addition operations.</p>
<p>The colon works to create vectors of numbers that are sequential. To create a vector of elements that are not necessarily sequential, we can use the concatenate or combine function, <code>c()</code>.</p>
<p>Let’s combine 1, 2 and 5 together in a vector using <code>c()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>)</code></pre>
<pre><code>## [1] 1 2 5</code></pre>
<p>No surprises there. Let’s concatenate 1:5 with 11:15 using <code>c()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,<span class="dv">11</span><span class="op">:</span><span class="dv">15</span>)</code></pre>
<pre><code>##  [1]  1  2  3  4  5 11 12 13 14 15</code></pre>
<p>There is a nice function called <code>seq()</code> to create a vector that is a sequence of numbers. Check out its help menu by typing <code>?seq()</code></p>
<pre class="sourceCode r"><code class="sourceCode r">?seq</code></pre>
<p>Let’s use what we saw in the arguments section of the help menu to create a vector that goes from to 2 to 200 stepping by 4s.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">2</span>, <span class="dt">to =</span> <span class="dv">200</span>, <span class="dt">by =</span> <span class="dv">4</span>)</code></pre>
<pre><code>##  [1]   2   6  10  14  18  22  26  30  34  38  42  46  50  54  58  62  66
## [18]  70  74  78  82  86  90  94  98 102 106 110 114 118 122 126 130 134
## [35] 138 142 146 150 154 158 162 166 170 174 178 182 186 190 194 198</code></pre>
<p>Vectors can be assigned names, just like we did for singular values above. Let’s assign a vector of animal weights 50, 60 and 66 to an object called <code>animal_weights</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">animal_weights &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">50</span>,<span class="dv">60</span>,<span class="dv">66</span>)</code></pre>
<p>Let’s print the object by calling its name.</p>
<pre class="sourceCode r"><code class="sourceCode r">animal_weights</code></pre>
<pre><code>## [1] 50 60 66</code></pre>
<p>So far all the vectors we have created have contained numbers. Let’s create a vector of words, called a character vector in R. Strings of characters in R should each be surrounded by “character” or ‘character’. We’ll create a vector called <code>animals</code> that contains the names of different animals. Then we’ll print the vector by calling its name.</p>
<pre class="sourceCode r"><code class="sourceCode r">animals &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;mouse&quot;</span>, <span class="st">&quot;rat&quot;</span>, <span class="st">&quot;dog&quot;</span>)
animals</code></pre>
<pre><code>## [1] &quot;mouse&quot; &quot;rat&quot;   &quot;dog&quot;</code></pre>
</div>
<div id="inspecting-vectors" class="section level2">
<h2><span class="header-section-number">1.11</span> Inspecting Vectors</h2>
<p>There are a lot of useful functions for inspecting a vector’s contents. Remember that a dataframe is a collection of vectors, so these same functions will help us inspect the columns of our dataset.</p>
<p><code>length()</code> tells you how many elements are in the vector. Let’s try it on animals and animal_weights</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(animals)</code></pre>
<pre><code>## [1] 3</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(animal_weights)</code></pre>
<pre><code>## [1] 3</code></pre>
<p><code>class()</code> tells you the type of object</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(animals)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(animal_weights)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>This confirms that <code>animals</code> is a character vector and <code>animal_weights</code> is a numeric vector</p>
<p>The str() function provides an overview of the object’s structure</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(animal_weights)</code></pre>
<pre><code>##  num [1:3] 50 60 66</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(animals)</code></pre>
<pre><code>##  chr [1:3] &quot;mouse&quot; &quot;rat&quot; &quot;dog&quot;</code></pre>
<p>There are no suprises here, but once we start investigating dataframes and other more complex objects, we will see how useful <code>str()</code> can be</p>
<p>To add elements to the end of a vector, we can use the <code>c()</code> function.</p>
<pre class="sourceCode r"><code class="sourceCode r">animal_weights &lt;-<span class="st"> </span><span class="kw">c</span>(animal_weights, <span class="dv">80</span>)
animals &lt;-<span class="st"> </span><span class="kw">c</span>(animals, <span class="st">&quot;pig&quot;</span>)</code></pre>
<p>You can add elements to the beginning of a vector in a similar fashion</p>
<pre class="sourceCode r"><code class="sourceCode r">animal_weights &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">75</span>, animal_weights)
animals &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;rabbit&quot;</span>, animals)</code></pre>
<p>By reassigning to the original vector’s name each time, we are overwriting its contents with the new data</p>
<p>Certain functions only operate on particular classes of objects. For example, let’s try to take the sum of <code>animal_weights</code> and the sum of <code>animals</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(animal_weights)</code></pre>
<pre><code>## [1] 331</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#sum(animals) errors out</span></code></pre>
<p>We can calculate the sum of <code>animal_weights</code> because it is a numeric vector. However, the <code>sum()</code> function cannot operate on a character type vector, so we get an error.</p>
</div>
<div id="indexing-vectors" class="section level2">
<h2><span class="header-section-number">1.12</span> Indexing vectors</h2>
<p>Indexing a vector means accessing individual elements from the vector.</p>
<p>To demonstrate this, let’s create a vector of 50 numbers from 101 to 150. Because these elements are sequential, we can simply use the <code>:</code>. We’ll call this vector x.</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">101</span><span class="op">:</span><span class="dv">150</span></code></pre>
<p>We can access certain elements by putting the index we’re interested in in square brackets after the name of the vector. For example, to return the first element of x, we type:</p>
<pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">1</span>]</code></pre>
<pre><code>## [1] 101</code></pre>
<p>Note that the index starts at 1, not 0. R indexing differs from many programming languages in this sense.</p>
<p>To access the fifth through tenth elements of x, we can index x using a vector from <code>5:10</code></p>
<pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">5</span><span class="op">:</span><span class="dv">10</span>]</code></pre>
<pre><code>## [1] 105 106 107 108 109 110</code></pre>
<p>If we want to see the fortieth and forty-eighth elements, because those two numbers are not sequential, we can combine them with <code>c()</code> and then index the vector based on that combination of indices.</p>
<pre class="sourceCode r"><code class="sourceCode r">x[<span class="kw">c</span>(<span class="dv">40</span>,<span class="dv">48</span>)]</code></pre>
<pre><code>## [1] 140 148</code></pre>
</div>
<div id="dataframes" class="section level2">
<h2><span class="header-section-number">1.13</span> DataFrames</h2>
<p>Let’s move on to learning about dataframes. There are <em>lots</em> of different basic data structures in R. Besides the dataframe, there are also arrays, lists, matrices, etc. We are going to skip those in favor of spending time learning the data structure you’ll probably use most – the <strong>dataframe</strong>.</p>
<p>We use dataframes to store <em>heterogeneous tabular</em> data in R: <em>tabular</em>, meaning that individuals or observations are typically represented in rows, while variables or features are represented in columns; <em>heterogeneous</em>, meaning that columns/features/variables can be different classes (a variable like age, can be numeric, while another, like cause of death, can be a character string).</p>
</div>
<div id="the-gapminder-data" class="section level2">
<h2><span class="header-section-number">1.14</span> The Gapminder data</h2>
<p>We have the gapminder.csv file into our project directory, but we don’t know anything about it yet. Let’s read it into R so we can start exploring it.</p>
<p>There are lots of ways to load data into R. There is a point-and-click RStudio menu and go to File &gt; Import Data Set &gt; Import From Text File but that is not the most reproducible way to read in data.</p>
<p>Instead, we would prefer that you read data into R for analysis as part of your script.</p>
<p>Today, we will use the <code>read.csv()</code> function to load the gapminder.csv file. A csv file stands for comma separated values and you can create a csv file in any spreadsheet program by going to File –&gt; Save As –&gt; choose the csv format.</p>
<p>The first argument we provide to <code>read.csv()</code> is the path to our dataset. Our data is in our project directory in a subfolder called data, so we will provide the path <code>data/gapminder.csv</code>. There are many other arguments in <code>read.csv()</code>, so be sure to check those out as you are thinking about reading in your own datasets.</p>
<p>Just like we did with values and vectors, let’s assign a name to the output of <code>read.csv()</code> to create a dataframe object. I’ll name my dataset <code>gm</code> to stand for gapminder.</p>
<pre class="sourceCode r"><code class="sourceCode r">gm &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/gapminder.csv&quot;</span>)</code></pre>
<p>Let’s look at this object by calling its name</p>
<pre class="sourceCode r"><code class="sourceCode r">gm</code></pre>
<p>Printing large data sets to the console is ugly. In the next chapter, we will learn about a modification to dataframes that make them nicer to print. Jump to section /<span class="citation">@ref</span>(tibble)</p>
<p>For now, let’s use the <code>View()</code> function to look at the data. Note that this is a read only viewer - not like Excel where you can go in and change cell values etc. This feature helps with reproducibility.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(gm)</code></pre>
<p>Let’s go back to the script. Your script is still there. It is in a tab next to the viewer tab.</p>
</div>
<div id="inspecting-dataframes" class="section level2">
<h2><span class="header-section-number">1.15</span> Inspecting Dataframes</h2>
<p>There are several functions that are useful for investigating dataframes. We already saw some of them in the section on vectors above.</p>
<p>Instead of printing the whole dataframe to the console, we can print an abbreviated version using <code>head()</code> and <code>tail()</code>. By default, these functions give us the first and last 6 rows respectively</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(gm)</code></pre>
<pre><code>##       country continent year lifeExp      pop gdpPercap
## 1 Afghanistan      Asia 1952  28.801  8425333  779.4453
## 2 Afghanistan      Asia 1957  30.332  9240934  820.8530
## 3 Afghanistan      Asia 1962  31.997 10267083  853.1007
## 4 Afghanistan      Asia 1967  34.020 11537966  836.1971
## 5 Afghanistan      Asia 1972  36.088 13079460  739.9811
## 6 Afghanistan      Asia 1977  38.438 14880372  786.1134</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(gm)</code></pre>
<pre><code>##       country continent year lifeExp      pop gdpPercap
## 1699 Zimbabwe    Africa 1982  60.363  7636524  788.8550
## 1700 Zimbabwe    Africa 1987  62.351  9216418  706.1573
## 1701 Zimbabwe    Africa 1992  60.377 10704340  693.4208
## 1702 Zimbabwe    Africa 1997  46.809 11404948  792.4500
## 1703 Zimbabwe    Africa 2002  39.989 11926563  672.0386
## 1704 Zimbabwe    Africa 2007  43.487 12311143  469.7093</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># see the first 12 rows</span>
<span class="kw">head</span>(gm, <span class="dt">n=</span> <span class="dv">12</span>)</code></pre>
<pre><code>##        country continent year lifeExp      pop gdpPercap
## 1  Afghanistan      Asia 1952  28.801  8425333  779.4453
## 2  Afghanistan      Asia 1957  30.332  9240934  820.8530
## 3  Afghanistan      Asia 1962  31.997 10267083  853.1007
## 4  Afghanistan      Asia 1967  34.020 11537966  836.1971
## 5  Afghanistan      Asia 1972  36.088 13079460  739.9811
## 6  Afghanistan      Asia 1977  38.438 14880372  786.1134
## 7  Afghanistan      Asia 1982  39.854 12881816  978.0114
## 8  Afghanistan      Asia 1987  40.822 13867957  852.3959
## 9  Afghanistan      Asia 1992  41.674 16317921  649.3414
## 10 Afghanistan      Asia 1997  41.763 22227415  635.3414
## 11 Afghanistan      Asia 2002  42.129 25268405  726.7341
## 12 Afghanistan      Asia 2007  43.828 31889923  974.5803</code></pre>
<p>Remember, <code>class()</code> tells us the type of object</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(gm)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>We can look at the number of rows and columns with <code>dim()</code>, just the number of rows with <code>nrow()</code> and just the number of columns with <code>ncol()</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(gm)</code></pre>
<pre><code>## [1] 1704    6</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(gm)</code></pre>
<pre><code>## [1] 1704</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(gm)</code></pre>
<pre><code>## [1] 6</code></pre>
<p><code>names()</code> will show us the column names</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(gm)</code></pre>
<pre><code>## [1] &quot;country&quot;   &quot;continent&quot; &quot;year&quot;      &quot;lifeExp&quot;   &quot;pop&quot;       &quot;gdpPercap&quot;</code></pre>
<p>And probably the two you’ll use the most to inspect data frames, because they are the most descriptive, are <code>summary()</code> and <code>str()</code>. Let’s start with <code>summary()</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(gm)</code></pre>
<pre><code>##         country        continent        year         lifeExp     
##  Afghanistan:  12   Africa  :624   Min.   :1952   Min.   :23.60  
##  Albania    :  12   Americas:300   1st Qu.:1966   1st Qu.:48.20  
##  Algeria    :  12   Asia    :396   Median :1980   Median :60.71  
##  Angola     :  12   Europe  :360   Mean   :1980   Mean   :59.47  
##  Argentina  :  12   Oceania : 24   3rd Qu.:1993   3rd Qu.:70.85  
##  Australia  :  12                  Max.   :2007   Max.   :82.60  
##  (Other)    :1632                                                
##       pop              gdpPercap       
##  Min.   :6.001e+04   Min.   :   241.2  
##  1st Qu.:2.794e+06   1st Qu.:  1202.1  
##  Median :7.024e+06   Median :  3531.8  
##  Mean   :2.960e+07   Mean   :  7215.3  
##  3rd Qu.:1.959e+07   3rd Qu.:  9325.5  
##  Max.   :1.319e+09   Max.   :113523.1  
## </code></pre>
<p>Notice that the output depends on the type of column. For country, a character vector, we get a frequency count of the number of occurences of the first few countries. Same for continent. The other columns are numeric, so their summary is a six number summary showing the minimum, 1st quartile, median, mean, 3rd quartile, and the maximum.</p>
<p>The <code>read.csv()</code> determined what type of column each one was while we were reading in the data. Of course, there are arguments to change the type of column within the <code>read.csv()</code> function.</p>
<p>Let’s look now at the structure of gm.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(gm)</code></pre>
<pre><code>## &#39;data.frame&#39;:    1704 obs. of  6 variables:
##  $ country  : Factor w/ 142 levels &quot;Afghanistan&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ continent: Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
##  $ lifeExp  : num  28.8 30.3 32 34 36.1 ...
##  $ pop      : int  8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...
##  $ gdpPercap: num  779 821 853 836 740 ...</code></pre>
<p>The structure tells us that gm is a dataframe object and it specifies the dimensions. Below that, it also gives us each of the column names with the type of data it contains and the first 5 or 10 values for each column.</p>
<ul>
<li><code>country</code> is a coded as a factor variable, which I define as a <em>character vector with groups</em>. Because “Afghanistan” occurs several times in the dataset and we want R to recognize that all occurences of “Afghanistan” should be a group, a factor variable is the way to do that. We can see that there are 142 levels of the country factor, meaning there are 142 unique countries in our gm dataset.
<ul>
<li>What are the 1s in the country line? Internally, R codes factors as numbers for faster computation. Because Afghanistan is first country alphabetically, it is coded internally as a 1. The first ten lines of the dataset are Afghanistan, so 10 1s are shown.</li>
</ul></li>
<li><code>continent</code> is also a factor variable with 5 different levels.
<ul>
<li>What are the 3s in the continent line? In alphabetical order, Africa will be 1, Americas will be 2, Asia will be 3, etc. Because the first 10 lines of the dataset are data on Afghanistan, and Afghanistan is in Asia, that is why we see the 3s.</li>
</ul></li>
<li><code>year</code> is an integer variable. The first 10 values of the variable are listed</li>
<li><code>lifeExp</code> is a numeric variable. The first 5 values of the variable are listed</li>
<li><code>pop</code> is an integer variable. The first 10 values of the variable are listed</li>
<li><code>gdpPercap</code> is a numeric variable. The first 5 values of the variable are listed</li>
</ul>
</div>
<div id="accessing-variables-subsetting-data-frames" class="section level2">
<h2><span class="header-section-number">1.16</span> Accessing variables &amp; subsetting data frames</h2>
<p>Notice in the <code>str()</code> output that there is a <code>$</code> in front of each of the variable names. That symbol is how we access invidual variables / columns / vectors from a dataframe object</p>
<p>To access a variable from a dataframe, the syntax we want is <code>dataframe$columnname</code></p>
<p>Let’s use this to print out all of values in the <code>pop</code> variable. First we call the dataframe, then $ and the variable name</p>
<pre class="sourceCode r"><code class="sourceCode r">gm<span class="op">$</span>pop</code></pre>
<p>Whoa. Maybe printing out all the values of a column is not very helpful. Maybe we meant to call <code>head()</code> on one column</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(gm<span class="op">$</span>pop)</code></pre>
<pre><code>## [1]  8425333  9240934 10267083 11537966 13079460 14880372</code></pre>
<p>Using this same syntax, let’s calculate the average life expectancy in the gm dataset, using the built-in <code>mean()</code> function. Notice that the <code>lifeExp</code> variable is mixed case, so be careful in spelling. However, RStudio’s autocomplete function can help. Once you type the <code>gm$</code> RStudio autocompletes with the options for variable names so you can just select from the list.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(gm<span class="op">$</span>lifeExp)</code></pre>
<pre><code>## [1] 59.47444</code></pre>
<p>The result is the average life expectancy across all countries and all years in the data set. What if we wanted to look at the average life expectancy for a particular subset of the dataframe?</p>
<p>In other words, we might be interested in the life expectancy for a particular country, and how that changes over years. Or maybe we want to calculate the average life expectancy across all countries, separately for each year. Or maybe the average life expectancy for different continents. We will learn to do all of this by the end of chapter 2.</p>
<hr />
</div>
<div id="exercise-1.3" class="section level2">
<h2><span class="header-section-number">1.17</span> EXERCISE 1.3</h2>
<ol style="list-style-type: decimal">
<li>What’s the standard deviation of the life expectancy (hint: get help on the <code>sd</code> function with <code>?sd</code>)</li>
<li>What’s the mean population size in millions? (hint: divide by <code>1000000</code>, or alternatively, <code>1e6</code>).</li>
<li>What’s the range of years represented in the data? (hint: <code>range()</code>).</li>
<li>Run a correlation between life expectancy and GDP per capita (hint: <code>?cor()</code>)</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sd</span>(gm<span class="op">$</span>lifeExp)</code></pre>
<pre><code>## [1] 12.91711</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(gm<span class="op">$</span>pop <span class="op">/</span><span class="st"> </span><span class="fl">1e6</span>) <span class="co">#divide each element by 1e6, then calculate the mean</span></code></pre>
<pre><code>## [1] 29.60121</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(gm<span class="op">$</span>year)</code></pre>
<pre><code>## [1] 1952 2007</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cor</span>(gm<span class="op">$</span>lifeExp, gm<span class="op">$</span>gdpPercap)</code></pre>
<pre><code>## [1] 0.5837062</code></pre>
<hr />
<p>While the gm dataset is fully complete, in real life, dataframes often come with missing values. For basic statistical functions like mean, sd, etc., there is an argument <code>na.rm</code> that we can use to remove missing values prior to calculating the statistic.</p>
<p>In this case, the result will not change because we do not have any missings, but in case your dataset does, here is what the code would look like</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate the mean population</span>
<span class="kw">mean</span>(gm<span class="op">$</span>pop)</code></pre>
<pre><code>## [1] 29601212</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#calculate the mean population after removing missings</span>
<span class="kw">mean</span>(gm<span class="op">$</span>pop, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>## [1] 29601212</code></pre>
</div>
<div id="subsetting-a-dataframe" class="section level2">
<h2><span class="header-section-number">1.18</span> Subsetting a dataframe</h2>
<p>Often we would like to see only certain rows or perform a function on a given set of rows. To subset a dataframe, we will first learn the function <code>subset()</code>. In Chapter 2, we will learn another way of subsetting rows using the filter function. Jump to section /<span class="citation">@ref</span>(filter)</p>
<ul>
<li>The first argument to <code>subset()</code> is the dataframe we are subsetting from.</li>
<li>The second argument provides the logical criteria the row will have to meet to be returned.</li>
</ul>
<p>There are six logical operators in R:</p>
<ul>
<li>equal to <strong>==</strong></li>
<li>not equal to <strong>!=</strong></li>
<li>greater than <strong>&gt;</strong></li>
<li>greater than or equal to <strong>&gt;=</strong></li>
<li>less than <strong>&lt;</strong></li>
<li>less than or equal to <strong>&lt;=</strong></li>
</ul>
<p>And you can chain multiple conditions together with an AND operator <strong>&amp;</strong> or an OR <strong>|</strong> operator</p>
<p>Let’s see how it works by subsetting for rows from the United States. First let’s use <code>View()</code> to see how USA is spelled. Click on the country column header to sort by country to quickly navigate to the <em>U</em> section.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(gm)</code></pre>
<p>Ok, now that we know how it is spelled, we can write a line of code to subset for where country is ‘United States’. We need the quotes because country is a character (factor) variable.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subset</span>(gm, <span class="dt">subset =</span> country <span class="op">==</span><span class="st"> &#39;United States&#39;</span>)</code></pre>
<pre><code>##            country continent year lifeExp       pop gdpPercap
## 1609 United States  Americas 1952  68.440 157553000  13990.48
## 1610 United States  Americas 1957  69.490 171984000  14847.13
## 1611 United States  Americas 1962  70.210 186538000  16173.15
## 1612 United States  Americas 1967  70.760 198712000  19530.37
## 1613 United States  Americas 1972  71.340 209896000  21806.04
## 1614 United States  Americas 1977  73.380 220239000  24072.63
## 1615 United States  Americas 1982  74.650 232187835  25009.56
## 1616 United States  Americas 1987  75.020 242803533  29884.35
## 1617 United States  Americas 1992  76.090 256894189  32003.93
## 1618 United States  Americas 1997  76.810 272911760  35767.43
## 1619 United States  Americas 2002  77.310 287675526  39097.10
## 1620 United States  Americas 2007  78.242 301139947  42951.65</code></pre>
<p>We do not need to specify <code>gm$country</code> because the first argument told R we would be operating within the gm dataframe. Therefore, we need only specify the variable name in the subset argument.</p>
<p>Now let’s return the data that meets multiple criteria at once. We’ll use the <code>&amp;</code> to combine the year == 1982 and country == “United States” criteria</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subset</span>(gm, <span class="dt">subset =</span> year <span class="op">==</span><span class="st"> </span><span class="dv">1982</span> <span class="op">&amp;</span><span class="st"> </span>country <span class="op">==</span><span class="st"> &#39;United States&#39;</span>)</code></pre>
<pre><code>##            country continent year lifeExp       pop gdpPercap
## 1615 United States  Americas 1982   74.65 232187835  25009.56</code></pre>
<p>We’ll do one more together before you can practice on your own. Let’s subset the gm dataset for rows where the population is higher than 1 billion (1e9)</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subset</span>(gm, <span class="dt">subset =</span> pop <span class="op">&gt;</span><span class="st"> </span><span class="fl">1e9</span>)</code></pre>
<pre><code>##     country continent year lifeExp        pop gdpPercap
## 295   China      Asia 1982  65.525 1000281000  962.4214
## 296   China      Asia 1987  67.274 1084035000 1378.9040
## 297   China      Asia 1992  68.690 1164970000 1655.7842
## 298   China      Asia 1997  70.426 1230075000 2289.2341
## 299   China      Asia 2002  72.028 1280400000 3119.2809
## 300   China      Asia 2007  72.961 1318683096 4959.1149
## 707   India      Asia 2002  62.879 1034172547 1746.7695
## 708   India      Asia 2007  64.698 1110396331 2452.2104</code></pre>
<hr />
</div>
<div id="exercise-1.4" class="section level2">
<h2><span class="header-section-number">1.19</span> EXERCISE 1.4</h2>
<p>Use the <code>subset()</code> function to return rows matching the given criteria.</p>
<ol style="list-style-type: decimal">
<li>Which rows have life expectancies of more than 80 years (&gt;80)?</li>
<li>Which countries had a low GDP per capita (&lt; 500) in 2007?</li>
<li>Which rows have extremely low GDP per capita (&lt; 300) OR extremely low life expectancy (&lt; 30)?</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#1.</span>
<span class="kw">subset</span>(gm, <span class="dt">subset =</span> lifeExp <span class="op">&gt;</span><span class="st"> </span><span class="dv">80</span>)</code></pre>
<pre><code>##               country continent year lifeExp       pop gdpPercap
## 71          Australia   Oceania 2002  80.370  19546792  30687.75
## 72          Australia   Oceania 2007  81.235  20434176  34435.37
## 252            Canada  Americas 2007  80.653  33390141  36319.24
## 540            France    Europe 2007  80.657  61083916  30470.02
## 671  Hong Kong, China      Asia 2002  81.495   6762476  30209.02
## 672  Hong Kong, China      Asia 2007  82.208   6980412  39724.98
## 695           Iceland    Europe 2002  80.500    288030  31163.20
## 696           Iceland    Europe 2007  81.757    301931  36180.79
## 768            Israel      Asia 2007  80.745   6426679  25523.28
## 779             Italy    Europe 2002  80.240  57926999  27968.10
## 780             Italy    Europe 2007  80.546  58147733  28569.72
## 802             Japan      Asia 1997  80.690 125956499  28816.58
## 803             Japan      Asia 2002  82.000 127065841  28604.59
## 804             Japan      Asia 2007  82.603 127467972  31656.07
## 1104      New Zealand   Oceania 2007  80.204   4115771  25185.01
## 1152           Norway    Europe 2007  80.196   4627926  49357.19
## 1428            Spain    Europe 2007  80.941  40448191  28821.06
## 1475           Sweden    Europe 2002  80.040   8954175  29341.63
## 1476           Sweden    Europe 2007  80.884   9031088  33859.75
## 1487      Switzerland    Europe 2002  80.620   7361757  34480.96
## 1488      Switzerland    Europe 2007  81.701   7554661  37506.42</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#2.</span>
<span class="kw">subset</span>(gm, <span class="dt">subset =</span> gdpPercap <span class="op">&lt;</span><span class="st"> </span><span class="dv">500</span> <span class="op">&amp;</span><span class="st"> </span>year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>)</code></pre>
<pre><code>##               country continent year lifeExp      pop gdpPercap
## 216           Burundi    Africa 2007  49.580  8390505  430.0707
## 336  Congo, Dem. Rep.    Africa 2007  46.462 64606759  277.5519
## 900           Liberia    Africa 2007  45.678  3193942  414.5073
## 1704         Zimbabwe    Africa 2007  43.487 12311143  469.7093</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subset</span>(gm, <span class="dt">subset =</span> year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span> <span class="op">&amp;</span><span class="st"> </span>gdpPercap <span class="op">&lt;</span><span class="st"> </span><span class="dv">500</span>) <span class="co"># order doesn&#39;t matter</span></code></pre>
<pre><code>##               country continent year lifeExp      pop gdpPercap
## 216           Burundi    Africa 2007  49.580  8390505  430.0707
## 336  Congo, Dem. Rep.    Africa 2007  46.462 64606759  277.5519
## 900           Liberia    Africa 2007  45.678  3193942  414.5073
## 1704         Zimbabwe    Africa 2007  43.487 12311143  469.7093</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#3.</span>
<span class="kw">subset</span>(gm, <span class="dt">subset =</span> gdpPercap <span class="op">&lt;</span><span class="st"> </span><span class="dv">300</span> <span class="op">|</span><span class="st"> </span>lifeExp <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)</code></pre>
<pre><code>##               country continent year lifeExp      pop gdpPercap
## 1         Afghanistan      Asia 1952  28.801  8425333  779.4453
## 335  Congo, Dem. Rep.    Africa 2002  44.966 55379852  241.1659
## 336  Congo, Dem. Rep.    Africa 2007  46.462 64606759  277.5519
## 625     Guinea-Bissau    Africa 1952  32.500   580653  299.8503
## 877           Lesotho    Africa 1952  42.138   748747  298.8462
## 1293           Rwanda    Africa 1992  23.599  7290203  737.0686</code></pre>
<hr />
</div>
<div id="plots-in-base-r" class="section level2">
<h2><span class="header-section-number">1.20</span> Plots in base R</h2>
<p>Plots are a great way to help us explore our dataset to see relationships, investigate interactions, diagnose problems, etc.</p>
<p>Here we will introduce plotting using base R (without loading any extra packages). Chapter 3 is all about plotting using the premier plotting package in R, ggplot2. Jump to /<span class="citation">@ref</span>(ggplot)</p>
<p>Let’s start out with a histogram of the life expectancy variable from gm.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(gm<span class="op">$</span>lifeExp)</code></pre>
<p><img src="Book_files/figure-html/hist1-1.png" width="672" /></p>
<p>R decided how many breaks to insert in the above histogram, but we can set that manually using the <code>breaks =</code> argument.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(gm<span class="op">$</span>lifeExp, <span class="dt">breaks=</span><span class="dv">100</span>)</code></pre>
<p><img src="Book_files/figure-html/hist2-1.png" width="672" /></p>
<p>We can also change the color of the bars using <code>col =</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(gm<span class="op">$</span>lifeExp, <span class="dt">breaks=</span><span class="dv">100</span>, <span class="dt">col=</span><span class="st">&#39;blue&#39;</span>)</code></pre>
<p><img src="Book_files/figure-html/hist3-1.png" width="672" /></p>
<p>If we wanted to look at more than one numeric variable we could try a scatterplot. The syntax for <code>plot(dataframe$varX, dataframe$varY)</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(gm<span class="op">$</span>gdpPercap, gm<span class="op">$</span>lifeExp)</code></pre>
<p><img src="Book_files/figure-html/plot2-1.png" width="672" /></p>
<p>The default plotting character in base R is an open circle, which I dislike. Let’s change that using the <code>pch =</code> argument, which stands for plotting character. pch ranges from 0 - 25 and you can easily search for what each looks like on the internet. I’ll change mine to <code>pch = 16</code>, a filled-in circle.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(gm<span class="op">$</span>gdpPercap, gm<span class="op">$</span>lifeExp, <span class="dt">pch =</span> <span class="dv">16</span>)</code></pre>
<p><img src="Book_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p>Next, I would like to change the color of the points to red using <code>col = &quot;red&quot;</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(gm<span class="op">$</span>gdpPercap, gm<span class="op">$</span>lifeExp, <span class="dt">pch =</span> <span class="dv">16</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</code></pre>
<p><img src="Book_files/figure-html/buildplot-1.png" width="672" /></p>
<p>You can see the names of all 657 base R colors</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colors</span>()</code></pre>
<p>To add a title, the argument is <code>main =</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(gm<span class="op">$</span>gdpPercap, gm<span class="op">$</span>lifeExp, <span class="dt">pch =</span> <span class="dv">16</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">main =</span> <span class="st">&quot;Life Exp vs GDP&quot;</span>)</code></pre>
<p><img src="Book_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<p>Finally, we’ll add an xlabel and a ylabel both in quotes.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(gm<span class="op">$</span>gdpPercap, gm<span class="op">$</span>lifeExp, <span class="dt">pch =</span> <span class="dv">16</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">main =</span> <span class="st">&quot;Life Exp vs GDP&quot;</span>, 
     <span class="dt">ylab =</span> <span class="st">&quot;Life Expectancy (years)&quot;</span>, 
     <span class="dt">xlab =</span> <span class="st">&quot;Per-capita GDP ($)&quot;</span>)</code></pre>
<p><img src="Book_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<p>There are hundreds of plotting parameters you can use to customize your plot’s appearance. I know these parameters because I have learned them. The internet is your friend in this case, so if you forget how to modify a parameter, don’t be afraid to Google it.</p>
<hr />
</div>
<div id="exercise-1.5" class="section level2">
<h2><span class="header-section-number">1.21</span> EXERCISE 1.5</h2>
<p>Create a plot to show the relationship between continent and life expectancy. Optional: Add color, axis labels, and a title</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(gm<span class="op">$</span>continent, gm<span class="op">$</span>lifeExp)</code></pre>
<p><img src="Book_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<hr />
<p>Visualizations are a large part of R’s appeal and in our opinion, learning to plot using ggplot2 will serve you well. Therefore, we only cover the very basics of plotting using base R here, and devote more time to a more comprehensive dive into ggplot2 in Chapter 3 /<span class="citation">@ref</span>(ggplot2)</p>
</div>
<div id="write-csv-file" class="section level2">
<h2><span class="header-section-number">1.22</span> Write csv file</h2>
<p>We’ve already seen how to read in data using read.csv(). Now we’ll do the opposite. There are going to be some cases when you need to save the data you’re working on to open up outside of R.</p>
<p>Just like R has functions to read data of many differnt kinds of formats, it also has functions to write data into many different kinds of formats. We’ll stick to csv format here.</p>
<p>First, let’s create a dataframe that is a subset of gm for just 1997. We’ll name the resulting dataframe</p>
<pre class="sourceCode r"><code class="sourceCode r">gm97 &lt;-<span class="st"> </span><span class="kw">subset</span>(gm, <span class="dt">subset =</span> year <span class="op">==</span><span class="st"> </span><span class="dv">1997</span>)</code></pre>
<p>To save this as a csv file, we will call <code>write.csv()</code> where the first argument is the R object to be written and the second argurment is the name of the proposed file.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(gm97, <span class="dt">file =</span> <span class="st">&quot;gm97.csv&quot;</span>)</code></pre>
<p>Where did it go? Let’s have a look at the Files pane (bottom right) and there it is. It went into our working directory (project directory) automatically. We don’t need to worry about our working directory here because we’re using an R project.</p>
</div>
<div id="saving-your-work-and-quitting-r" class="section level2">
<h2><span class="header-section-number">1.23</span> Saving your work and quitting R</h2>
<p>We’ll close this chapter with how to save your work.</p>
<p>Our suggestion is to make sure your R script (top left) is saved and then throw out the rest. After all, the script created the objects in the environment, the output in the console, and all the plots. Remember that to save your script, go to File –&gt; Save or <code>CMD + S</code> (mac) and <code>CTRL + S</code> (pc).</p>
<p>I prefer that RStudio never ask me to save my workspace (Environment, Plots, etc) so I have set that preference in Tools –&gt; Global Options –&gt; General. <em>Save workspace to .RData on exit = “never”</em>. While you are at it, <strong>uncheck</strong> the options for 1. Restore most recently opened project 2.Restore previosuly open source documents on startup 3. Restore .RData into workspace at startup</p>
<p>Once your script is saved, quit RStudio.</p>
<p>To re-open the project and prove to yourself that all of your hard work has been preserved, double click the Rproj file to launch RStudio in your project directory. Now open your script and start running your code.</p>
<p>To run all the code in an R file (there have to be no errors), highlight the entire code <code>CMD + A</code> (mac) or <code>CTRL + A</code> (pc) and then run.</p>
<p>Woohooo! Happy Running! See you in Chapter 2.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="taming-wild-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
